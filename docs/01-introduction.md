# イントロダクション

TDD の前に、テストに関する一般的な基礎知識を確認しましょう。

## テストの分類

開発者が行うテストには、主に以下の二つがあげられます。

- 単体テスト（Unit Test: UT）
  - メソッドやクラスなど、コンポーネント単位のテスト
- 統合テスト（Integration Test: IT）
  - メソッドやクラスを組み合わせた機能単位のテスト
  - Web API の場合、エンドポイントが単位になる

## 論理網羅

テストには、実装の詳細を把握した上でコードを評価する**ホワイトボックステスト**、実装の詳細を無視した仕様ベースで評価する**ブラックボックステスト**があります。
今回はホワイトボックステストに焦点を当てて解説します。

ホワイトボックステストにおいて、テストコードがどの程度網羅しているかを判断する基準に**論理網羅**があります。
テストコードがどの程度網羅しているかを示す指標のことを**カバレッジ**と言い、下記の論理網羅のカバレッジが 100%の時、優れたテストと言えます。

- 命令網羅（C0）
  - 各命令が少なくとも 1 回は実行される
- 分岐網羅（C1）
  - 各判定条件において、真偽が少なくとも 1 回は実行される
  - if 文の全ての分岐を網羅している
- 条件網羅（C2）
  - それぞれの条件分における真偽が 1 回は実行される

テストを作成する際は、C0・C1 カバレッジが 100%になるよう設計しましょう。C2 は可能な限りカバレッジを高める程度の心構えで十分です。

### テスト設計してみよう！

「ユーザを新規作成する API」の統合テストを考えます。ただし、管理者ロールを持ったユーザのみが新規ユーザ作成できることとします。
ちなみに、これは実装の詳細ではなく**ソフトウェアの仕様**にフォーカスしているので、ブラックボックステストに分類されます。

- 管理者ロールを持ったユーザが作成する（正常系）
- 管理者ロールを持たないユーザは作成不可（異常系）
- 未ログインの場合は作成不可（異常系）
- 同じユーザ ID が既に使用されている場合は作成不可（異常系）
- ...（API の制約によってテストケースは増減します）
